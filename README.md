## Каталогизатор лекарственных средств

### * Описание проекта
Проект представляет собой **каталог лекарственных средств** с тремя основными сущностями: Лекарственное средство (**Product**), действующее вещество (**Substance**), производитель (**Maker**). Модель Product связана с моделями Substance и Maker посредством связи belongsTo, последние же связаны с моделью Product посредством связи hasMany (один ко многим). **Для всех трёх сущностей реализованы 2 API эндпоинта: WEB (ответ в виде html страницы) и JSON.**


### * Структура
Стандартная Laravel MVC архитектура. HTTP запрос маршрутизируется в web.php, вызывается соответсвующий контроллер (в проекте используются однометодные контроллеры для удобства и чистоты кода), в контроллере происходит валидация запроса, фильтрация, вызывается сервис, посредством модели происходит взаимодействие с БД, полученный результат возвращается в представление (или в виде JSON).


### * Логирование
Логируются манипуляции (создание/изменение/удаление) с базой данных для моделей Product, Substance, Maker. В записях сообщается об успешной/неудачной манипуляции и указывается объект манипуляции. Используется драйвер single, логи хранятся по пути `storage/logs/debuginfo.log`.


### * Развертывание

............................

Для создания обязательных таблиц в БД используйте команду:
`php artisan migrate`

Для заполнения БД тестовыми данными используйте команду:
`php artisan db:seed`

Для сброса БД и повторного заполнения с тестовыми данными используйте:
`php artusan migrate:fresh --seed`

Для запуска тестов используйте команду:
`php artisan test`


### * REST API / Front
В проекте реализованы WEB и API запросы. Для того что бы выполнить API запрос и получить ответ в виде JSON, в заголовок обычного запроса нужно добавить ключ Accept со значением /json.

**Возможные запросы:**

Метод   | URL               | Действие
--------|-------------------|---------------------------------
GET	    |'/products/create' |   получение списка (есть фильтр)
POST	|'/products'        |   создание новой записи
PATCH	|'/products/{id}'   |   изменение записи
DELETE	|'/products/{id}'   |   удаление записи

Аналогично для моделей **Maker** (`makers/`) и **Substance** (`substances/`).

**При создании записи в JSON необходимо указать обязательные ключи и их значения:**
**Product**
`{
    "name": "String",
    "substance_id": 10,
    "maker_id": 5,
    "price": 100
}`

**Substance**
`{
    "name": "String"
}`

**Maker**
`{
    "name": "String",
    "link": "http://link.test"
}`
